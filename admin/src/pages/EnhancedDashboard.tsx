import React, { useState, useEffect } from 'react';\nimport { Calendar, FolderOpen, MessageSquare, Users, TrendingUp, Clock, CheckCircle, AlertCircle, Plus } from 'lucide-react';\nimport { settingsAPI } from '../api/settings.api';\nimport { Button } from '../components/ui/Button';\n\ninterface DashboardStats {\n  totalProjects: number;\n  totalAppointments: number;\n  pendingAppointments: number;\n  newInquiries: number;\n  recentActivities: Array<{\n    id: number;\n    type: string;\n    title: string;\n    message: string;\n    createdAt: string;\n  }>;\n}\n\nconst EnhancedDashboard: React.FC = () => {\n  const [stats, setStats] = useState<DashboardStats | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchDashboardStats();\n  }, []);\n\n  const fetchDashboardStats = async () => {\n    try {\n      const response = await settingsAPI.getDashboardStats();\n      setStats(response.data);\n    } catch (error) {\n      console.error('Failed to fetch dashboard stats:', error);\n      // Mock data for development\n      setStats({\n        totalProjects: 24,\n        totalAppointments: 156,\n        pendingAppointments: 8,\n        newInquiries: 12,\n        recentActivities: [\n          {\n            id: 1,\n            type: 'appointment',\n            title: 'New Appointment',\n            message: 'John Doe requested a consultation for house construction',\n            createdAt: '2024-01-15T10:30:00Z'\n          },\n          {\n            id: 2,\n            type: 'inquiry',\n            title: 'New Inquiry',\n            message: 'Alice Johnson sent a message about renovation project',\n            createdAt: '2024-01-15T09:15:00Z'\n          },\n          {\n            id: 3,\n            type: 'appointment',\n            title: 'Appointment Accepted',\n            message: 'Consultation with Jane Smith has been scheduled',\n            createdAt: '2024-01-14T16:45:00Z'\n          }\n        ]\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getActivityIcon = (type: string) => {\n    switch (type) {\n      case 'appointment': return <Calendar className=\"h-5 w-5 text-blue-500\" />;\n      case 'inquiry': return <MessageSquare className=\"h-5 w-5 text-green-500\" />;\n      case 'project': return <FolderOpen className=\"h-5 w-5 text-purple-500\" />;\n      default: return <AlertCircle className=\"h-5 w-5 text-gray-500\" />;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-2xl font-semibold text-gray-900\">Dashboard</h1>\n        <p className=\"mt-2 text-sm text-gray-700\">\n          Welcome to your admin dashboard. Here's an overview of your business.\n        </p>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\n        <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n          <div className=\"p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <FolderOpen className=\"h-6 w-6 text-gray-400\" />\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                    Total Projects\n                  </dt>\n                  <dd className=\"text-lg font-medium text-gray-900\">\n                    {stats?.totalProjects || 0}\n                  </dd>\n                </dl>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-gray-50 px-5 py-3\">\n            <div className=\"text-sm\">\n              <a href=\"/portfolio\" className=\"font-medium text-blue-700 hover:text-blue-900\">\n                View all projects\n              </a>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n          <div className=\"p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <Calendar className=\"h-6 w-6 text-gray-400\" />\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                    Total Appointments\n                  </dt>\n                  <dd className=\"text-lg font-medium text-gray-900\">\n                    {stats?.totalAppointments || 0}\n                  </dd>\n                </dl>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-gray-50 px-5 py-3\">\n            <div className=\"text-sm\">\n              <a href=\"/appointments\" className=\"font-medium text-blue-700 hover:text-blue-900\">\n                View appointments\n              </a>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n          <div className=\"p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <Clock className=\"h-6 w-6 text-yellow-400\" />\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                    Pending Appointments\n                  </dt>\n                  <dd className=\"text-lg font-medium text-gray-900\">\n                    {stats?.pendingAppointments || 0}\n                  </dd>\n                </dl>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-gray-50 px-5 py-3\">\n            <div className=\"text-sm\">\n              <a href=\"/appointments?status=pending\" className=\"font-medium text-yellow-700 hover:text-yellow-900\">\n                Review pending\n              </a>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n          <div className=\"p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <MessageSquare className=\"h-6 w-6 text-green-400\" />\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                    New Inquiries\n                  </dt>\n                  <dd className=\"text-lg font-medium text-gray-900\">\n                    {stats?.newInquiries || 0}\n                  </dd>\n                </dl>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-gray-50 px-5 py-3\">\n            <div className=\"text-sm\">\n              <a href=\"/inquiries?status=new\" className=\"font-medium text-green-700 hover:text-green-900\">\n                View inquiries\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"bg-white shadow rounded-lg\">\n        <div className=\"px-4 py-5 sm:p-6\">\n          <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\n            Quick Actions\n          </h3>\n          <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n            <a\n              href=\"/portfolio/new\"\n              className=\"relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-blue-500 rounded-lg border border-gray-200 hover:border-gray-300\"\n            >\n              <div>\n                <span className=\"rounded-lg inline-flex p-3 bg-blue-50 text-blue-700 ring-4 ring-white\">\n                  <Plus className=\"h-6 w-6\" />\n                </span>\n              </div>\n              <div className=\"mt-4\">\n                <h3 className=\"text-lg font-medium\">\n                  <span className=\"absolute inset-0\" />\n                  Add New Project\n                </h3>\n                <p className=\"mt-2 text-sm text-gray-500\">\n                  Add a new project to your portfolio\n                </p>\n              </div>\n            </a>\n\n            <a\n              href=\"/appointments\"\n              className=\"relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-blue-500 rounded-lg border border-gray-200 hover:border-gray-300\"\n            >\n              <div>\n                <span className=\"rounded-lg inline-flex p-3 bg-yellow-50 text-yellow-700 ring-4 ring-white\">\n                  <Calendar className=\"h-6 w-6\" />\n                </span>\n              </div>\n              <div className=\"mt-4\">\n                <h3 className=\"text-lg font-medium\">\n                  <span className=\"absolute inset-0\" />\n                  Manage Appointments\n                </h3>\n                <p className=\"mt-2 text-sm text-gray-500\">\n                  Review and respond to appointment requests\n                </p>\n              </div>\n            </a>\n\n            <a\n              href=\"/inquiries\"\n              className=\"relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-blue-500 rounded-lg border border-gray-200 hover:border-gray-300\"\n            >\n              <div>\n                <span className=\"rounded-lg inline-flex p-3 bg-green-50 text-green-700 ring-4 ring-white\">\n                  <MessageSquare className=\"h-6 w-6\" />\n                </span>\n              </div>\n              <div className=\"mt-4\">\n                <h3 className=\"text-lg font-medium\">\n                  <span className=\"absolute inset-0\" />\n                  Handle Inquiries\n                </h3>\n                <p className=\"mt-2 text-sm text-gray-500\">\n                  Respond to client inquiries and messages\n                </p>\n              </div>\n            </a>\n\n            <a\n              href=\"/settings\"\n              className=\"relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-blue-500 rounded-lg border border-gray-200 hover:border-gray-300\"\n            >\n              <div>\n                <span className=\"rounded-lg inline-flex p-3 bg-purple-50 text-purple-700 ring-4 ring-white\">\n                  <Users className=\"h-6 w-6\" />\n                </span>\n              </div>\n              <div className=\"mt-4\">\n                <h3 className=\"text-lg font-medium\">\n                  <span className=\"absolute inset-0\" />\n                  System Settings\n                </h3>\n                <p className=\"mt-2 text-sm text-gray-500\">\n                  Configure system settings and profile\n                </p>\n              </div>\n            </a>\n          </div>\n        </div>\n      </div>\n\n      {/* Recent Activities */}\n      <div className=\"bg-white shadow rounded-lg\">\n        <div className=\"px-4 py-5 sm:p-6\">\n          <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\n            Recent Activities\n          </h3>\n          <div className=\"flow-root\">\n            <ul className=\"-mb-8\">\n              {stats?.recentActivities?.map((activity, index) => (\n                <li key={activity.id}>\n                  <div className=\"relative pb-8\">\n                    {index !== (stats.recentActivities.length - 1) && (\n                      <span className=\"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200\" />\n                    )}\n                    <div className=\"relative flex space-x-3\">\n                      <div>\n                        <span className=\"h-8 w-8 rounded-full bg-gray-100 flex items-center justify-center ring-8 ring-white\">\n                          {getActivityIcon(activity.type)}\n                        </span>\n                      </div>\n                      <div className=\"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4\">\n                        <div>\n                          <p className=\"text-sm text-gray-900\">\n                            <span className=\"font-medium\">{activity.title}</span>\n                          </p>\n                          <p className=\"text-sm text-gray-500\">{activity.message}</p>\n                        </div>\n                        <div className=\"text-right text-sm whitespace-nowrap text-gray-500\">\n                          <time dateTime={activity.createdAt}>\n                            {new Date(activity.createdAt).toLocaleDateString()}\n                          </time>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EnhancedDashboard;